<!DOCTYPE html>
<html>
<head>
    {{template "header"}}
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> -->
  <script>
    // Listen for click on toggle checkbox
    function checkAll(ele) {
     var checkboxes = document.getElementsByTagName('input');
     if (ele.checked) {
         for (var i = 0; i < checkboxes.length; i++) {
             if (checkboxes[i].type == 'checkbox') {
                 checkboxes[i].checked = true;
             }
         }
     } else {
         for (var i = 0; i < checkboxes.length; i++) {
             console.log(i)
             if (checkboxes[i].type == 'checkbox') {
                 checkboxes[i].checked = false;
             }
         }
     }
 }
  </script>
</head>
<body>
    {{template "navigation" .}}
    <br> 
    {{template "messagebox" .}}
    <label for="cars">Choose a Manufacturer:</label>

    <select name="manufacturer" id="manufacturer">
      {{range $i, $value := .Orders}}
      <option value="{{.ManufacturerName}}">{{.ManufacturerName}}</option>
      {{end}}
    </select> 
    
  <div class="accordion accordion-flush" id="accordion">
    {{range $i, $value := .Orders}}
    <form method="POST" action="/ordercreate">
    <!-- Modal -->
    <div class="modal fade" id="exampleModal{{$i}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel{{$i}}">Confirm Order Create</h5>
            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
              This will create a reorder for Manufacturer {{.ManufacturerName}}, do you want to proceed?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <input type='submit' value='Create Order' class="btn btn-primary">
            </div>
        </div>
        </div>
    </div>
    <div class="accordion-item">
          <table class="table">
            <tr>
              <td>
                <input type="hidden" name="manufacturer" id="manufacturer" value="{{.Manufacturer}}">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal{{$i}}">Create Order</button>
              </td>
             </tr>
            </table>
            </div>
            <table class="table table-striped table-hover">
                <thead class="table-dark" style="position: sticky; top: 0; z-index: 1;">
                    <tr>
                        <th scope="col"></th>
                        <th scope="col">SKU</th>
                        <th scope="col">Manufacturer Part #</th>
                        <th scope="col">Product Option</th>
                        <th scope="col">Manufacturer</th>
                        <th scope="col">Processing Request</th>
                        <th scope="col">Unit</th>
                        <th scope="col">Unit Price</th>
                        <th scope="col">Currency</th>
                        <th scope="col">Order Qty</th>
                        <th scope="col">Add to Order  <INPUT type="checkbox" onchange="checkAll(this)" name="chk[]" /></th>
                        <th scope="col">Season</th>
                        <th scope="col">Inventory</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {{range $i, $value := .Products}}
                    <!-- Image Modal -->
                    <div class="modal fade" id="ModalImage{{$i}}" tabindex="-1" role="dialog" aria-labelledby="ModalImageLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                      <div class="modal-content">
                          <div class="modal-header">
                          <h5 class="modal-title" id="ModalImageLabel{{$i}}">{{.SKU}}</h5>
                              <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                          </button>
                          </div>
                          <div class="modal-body">
                            <img class="w-100" src="{{.Image.URL_Standard}}">
                          </div>
                          <div class="modal-footer">
                              <form action="/productdelete" method="POST">
                                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              </form>
                          </div>
                      </div>
                      </div>
                  </div>
                    <tr>
                            <div class="form-group">
                            <td><a role="button" ><img class="img-rounded" data-bs-toggle="modal" data-bs-target="#ModalImage{{$i}}" src="{{.Image.URL_Thumb}}" height="45px"></a></td>
                            <td>{{.SKU}}</td>
                            <td>{{.ManufacturerPart}}</td>
                            <td>{{.Description}}</td>
                            <td>{{.Manufacturer}}</td>
                            <td>{{.ProcessRequest}}</td>
                            <td>{{.Unit}}</td>
                            <td>{{.UnitPrice}}</td>
                            <td>{{.Currency}}</td>
                            <td>{{.Qty}}</td>
                            <td><input class="form-check-input" type='checkbox' name='sku' value='{{.SKU}}'></td> 
                            <td>{{.Season}}</td>
                            <td>{{.InventoryQTY}}</td>
                            </div>
                    </tr>
                    {{end}}
                  </form>
                </tbody>
            </table>
            <nav id="paginationNav" aria-label="Page navigation">
              <ul class="pagination justify-content-center">
                  <li class="page-item disabled" id="previousPageLi">
                      <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                  </li>
                  <li class="page-item disabled" id="nextPageLi">
                      <a class="page-link" href="#">Next</a>
                  </li>
              </ul>
          </nav>
    {{end}}
  </div>
</body>
</html>
